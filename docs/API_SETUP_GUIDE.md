# üåä Ocean API Setup Guide

Complete guide for obtaining and configuring all required API keys for OceanAware Guardian.

---

## üìã **Quick Setup Checklist**

- [ ] NOAA Tides & Currents API (Free)
- [ ] NASA Earthdata Account (Free)
- [ ] Firebase Project (Free tier)
- [ ] Azure Cosmos DB (Existing/Free tier)
- [ ] HuggingFace API Token (Free)
- [ ] OpenWeatherMap API (Free tier)
- [ ] VAPID Keys for Push Notifications

---

## 1Ô∏è‚É£ **NOAA APIs (FREE)**

### **NOAA Tides & Currents API**
**Purpose**: Tsunami warnings, tidal data, sea level measurements

**Setup Steps**:
1. Visit: https://api.tidesandcurrents.noaa.gov/api/prod/
2. Most endpoints are **public - NO API key required**
3. For higher rate limits, contact: [email protected]

**Example Request**:
```bash
# Get latest water level data
curl "https://api.tidesandcurrents.noaa.gov/api/prod/datagetter?date=latest&station=8454000&product=water_level&datum=MLLW&time_zone=gmt&units=metric&format=json"
```

**Rate Limit**: ~10 requests/second (public)

### **NOAA Coral Reef Watch**
**Purpose**: Ocean temperature, coral bleaching alerts

**Setup**: Public API - No registration required
**Endpoint**: https://coralreefwatch.noaa.gov/product/5km/

---

## 2Ô∏è‚É£ **NASA Earthdata (FREE)**

### **NASA Earthdata Account**
**Purpose**: Sea level rise data, ocean color, satellite imagery

**Setup Steps**:
1. Register: https://urs.earthdata.nasa.gov/users/new
2. Fill out profile (select "Educational" for use case)
3. Approve applications for:
   - **PO.DAAC** (Physical Oceanography)
   - **Ocean Color** (OBPG)
4. Get credentials from profile page

**Credentials**:
```env
VITE_NASA_EARTHDATA_KEY=your_username:your_password_base64
```

**Example Request**:
```bash
# Sea Level Data
curl -u username:password \
  "https://podaac.jpl.nasa.gov/ws/search/granule/?datasetId=MERGED_TP_J1_OSTM_OST_GMSL_ASCII_V51"
```

**Rate Limit**: 100 requests/minute

---

## 3Ô∏è‚É£ **Firebase (FREE TIER)**

### **Firebase Anonymous Authentication**
**Purpose**: COPPA-compliant user authentication

**Setup Steps**:
1. Go to https://console.firebase.google.com/
2. Create new project: `oceanaware-guardian`
3. Enable Authentication ‚Üí Anonymous sign-in
4. Get configuration:
   - Project Settings ‚Üí General
   - Copy web app config

**Configuration**:
```javascript
// Auto-generated by Firebase
{
  apiKey: "AIza...",
  authDomain: "oceanaware-guardian.firebaseapp.com",
  projectId: "oceanaware-guardian",
  storageBucket: "oceanaware-guardian.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abc123"
}
```

**Cost**: FREE (up to 10K users/month)

---

## 4Ô∏è‚É£ **Azure Cosmos DB (EXISTING)**

### **Community Hub Database**
**Purpose**: Store community reports, conservation projects

**Setup**:
- ‚úÖ Already configured from wildfire watch project
- ‚úÖ Just update container names if needed

**Update Container Names**:
```javascript
// server/services/CosmosManager.js
const DATABASE = 'oceanaware-guardian';
const CONTAINER = 'community-reports';
```

**Cost**: FREE tier (1000 RU/s, 25 GB storage)

---

## 5Ô∏è‚É£ **HuggingFace API (FREE)**

### **AI Image Analysis**
**Purpose**: Ocean health analysis from coastal imagery

**Setup Steps**:
1. Create account: https://huggingface.co/join
2. Go to Settings ‚Üí Access Tokens
3. Create new token ‚Üí Read access
4. Copy token

**Token Format**:
```env
VITE_HUGGINGFACE_API_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxx
```

**Rate Limit**: 1000 requests/day (free tier)

---

## 6Ô∏è‚É£ **USGS Coastal Change (FREE)**

### **Coastal Erosion Data**
**Purpose**: Historical erosion rates, coastal hazards

**Setup**: Public API - No key required
**Endpoint**: https://coastal.er.usgs.gov/api/

**Example**:
```bash
# Get coastal change data
curl "https://coastal.er.usgs.gov/hurricanes/research/gulfmex/api.php"
```

---

## 7Ô∏è‚É£ **OpenWeatherMap (FREE TIER)**

### **Weather & Ocean Conditions**
**Purpose**: Current weather, ocean temperature, wave data

**Setup Steps**:
1. Sign up: https://openweathermap.org/api
2. Go to API keys ‚Üí Generate key
3. Wait ~10 minutes for activation

**Free Tier Limits**:
- 1000 calls/day
- 60 calls/minute

---

## 8Ô∏è‚É£ **VAPID Keys for Push Notifications**

### **Web Push Notifications**
**Purpose**: Ocean hazard alerts, tsunami warnings

**Generate Keys**:
```bash
# Install web-push CLI
npm install -g web-push

# Generate VAPID keys
web-push generate-vapid-keys

# Output:
# Public Key: BNxxx...
# Private Key: Axxx...
```

**Add to .env**:
```env
VITE_VAPID_PUBLIC_KEY=BNxxx...
VAPID_PRIVATE_KEY=Axxx...
```

---

## üìù **Environment File Setup**

### **Create .env.local**
```bash
# Copy example file
cp .env.example .env.local

# Edit with your real keys
nano .env.local
```

### **Minimum Required for Development**:
```env
# Absolutely Required
VITE_FIREBASE_API_KEY=your_firebase_key
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id

# Highly Recommended
VITE_HUGGINGFACE_API_TOKEN=hf_xxx
VITE_OPENWEATHER_API_KEY=your_openweather_key

# Optional (can use mock data)
VITE_NASA_EARTHDATA_KEY=username:password
VITE_NOAA_API_KEY=optional
```

---

## üß™ **Testing API Connections**

### **Test Script**
Create `scripts/test-apis.js`:

```javascript
import axios from 'axios';

async function testAPIs() {
  // Test NOAA
  const noaa = await axios.get(
    'https://api.tidesandcurrents.noaa.gov/api/prod/datagetter?date=latest&station=8454000&product=water_level&datum=MLLW&format=json'
  );
  console.log('‚úÖ NOAA API working:', noaa.status === 200);

  // Test NASA (requires auth)
  try {
    const nasa = await axios.get(
      'https://sealevel.nasa.gov/data-viewer/',
      { auth: { username: 'your_username', password: 'your_password' } }
    );
    console.log('‚úÖ NASA API working:', nasa.status === 200);
  } catch (e) {
    console.log('‚ùå NASA API failed - check credentials');
  }

  // Test OpenWeather
  const weather = await axios.get(
    `https://api.openweathermap.org/data/2.5/weather?q=Boston&appid=${process.env.VITE_OPENWEATHER_API_KEY}`
  );
  console.log('‚úÖ OpenWeather API working:', weather.status === 200);
}

testAPIs();
```

**Run Test**:
```bash
node scripts/test-apis.js
```

---

## üö® **Common Issues**

### **NOAA API Returns 403**
- **Solution**: Check request format, ensure valid station ID
- **Docs**: https://api.tidesandcurrents.noaa.gov/api/prod/

### **NASA Authentication Failed**
- **Solution**: Verify username/password, approve PO.DAAC app
- **Portal**: https://urs.earthdata.nasa.gov/

### **Firebase CORS Errors**
- **Solution**: Add localhost to authorized domains
- **Location**: Firebase Console ‚Üí Authentication ‚Üí Settings ‚Üí Authorized domains

### **HuggingFace Rate Limit**
- **Solution**: Upgrade to Pro ($9/month) or implement caching
- **Cache**: Store results in Cosmos DB for 24 hours

---

## üí∞ **Cost Summary**

| Service | Free Tier | Upgrade Cost | Needed? |
|---------|-----------|--------------|---------|
| NOAA APIs | ‚úÖ Unlimited | Free forever | Required |
| NASA Earthdata | ‚úÖ Unlimited | Free forever | Required |
| Firebase Auth | ‚úÖ 10K users/mo | $0.01/user | Required |
| Azure Cosmos DB | ‚úÖ 1000 RU/s | ~$24/month | Required |
| HuggingFace | ‚úÖ 1000/day | $9/month | Required |
| OpenWeather | ‚úÖ 1000/day | $40/month | Optional |
| Marine Traffic | ‚ùå Trial only | $50/month | Optional |

**Estimated Monthly Cost**: **$0** (using free tiers)
**With upgrades**: ~$33/month (if needed for scaling)

---

## üîê **Security Best Practices**

1. ‚úÖ **Never commit .env.local** to git
2. ‚úÖ **Use Azure Key Vault** for production secrets
3. ‚úÖ **Rotate VAPID keys** every 6 months
4. ‚úÖ **Monitor API usage** to avoid overages
5. ‚úÖ **Implement rate limiting** on backend
6. ‚úÖ **Use environment variables** in Azure App Service

---

## üìö **Additional Resources**

- **NOAA Data Catalog**: https://data.noaa.gov/
- **NASA Ocean Data**: https://oceandata.sci.gsfc.nasa.gov/
- **USGS Water Data**: https://waterdata.usgs.gov/
- **Firebase Docs**: https://firebase.google.com/docs
- **Azure Cosmos DB**: https://docs.microsoft.com/azure/cosmos-db/

---

**Last Updated**: November 15, 2025
**Next Steps**: Copy `.env.example` to `.env.local` and fill in your API keys
