{
  "meta": {
    "project": "EcoQuest Wildfire Watch",
    "date": "2025-07-30",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "EcoQuest Wildfire Watch is an advanced AI-powered wildfire safety platform designed to enhance public safety through real-time fire intelligence, community coordination, family emergency management, and universal accessibility. It integrates cutting-edge AI computer vision, multi-source data, and interactive mapping to provide timely alerts, risk assessments, and crisis response tools to California residents and communities vulnerable to wildfires.",
  "core_goals": [
    "Provide real-time wildfire detection and predictive fire spread modeling using AI and satellite data.",
    "Enable community hazard reporting and coordination with privacy-first anonymous options.",
    "Facilitate family safety management through secure group setups, check-ins, and emergency messaging.",
    "Offer a simplified emergency-only interface (crisis mode) to prioritize critical actions during emergencies.",
    "Integrate multi-layer weather and environmental data for accurate risk analysis and alerting.",
    "Deliver a multilingual, accessible user experience compliant with WCAG 2.1 AA standards.",
    "Support offline-first functionality to ensure usability during internet outages.",
    "Implement an advanced push notification system providing context-aware and prioritized emergency alerts."
  ],
  "key_features": [
    "Multi-model AI-powered wildfire risk assessment combining computer vision, physics-based fire science, and real-time weather data.",
    "8-layer interactive fire intelligence mapping system showing active fires, predictions, evacuation zones, wind patterns, smoke plumes, power outages, and road conditions.",
    "Community Hub with real-time hazard reporting, anonymous safety check-ins, and mutual aid coordination powered by Cosmos DB.",
    "Family Safety Hub allowing group creation, invitation, secure messaging, and emergency status updates.",
    "Crisis Mode Interface with simplified UI optimized for emergency situations, accessible directly from alerts.",
    "Advanced push notification system with smart priority triggers, silent hours, and live badge updates across devices.",
    "Universal accessibility features including bilingual support (English/Spanish), voice narration, high contrast mode, and screen reader compatibility.",
    "Offline-first architecture with data caching, service worker integration, and offline emergency reporting capabilities.",
    "Authentication system supporting anonymous emergency reporting and optional Firebase integration.",
    "Multi-criteria community report filtering with presets and smart recommendations."
  ],
  "user_flow_summary": [
    "Users can view real-time fire data on an interactive map with multiple informational layers adjusted by emergency level.",
    "Community members submit and view hazard reports, check in their safety status anonymously or with identity, and coordinate mutual aid offers.",
    "Families create or join safety groups using group codes, conduct quick check-ins, and communicate via group messaging.",
    "During critical events, users can activate or be presented with a Crisis Mode interface simplifying emergency actions and providing immediate access to vital information.",
    "Users receive and manage push notifications tailored by location, proximity to fires, severity, and user preferences, including quiet time settings.",
    "Offline mode allows users to continue reporting hazards and checking in with local data caching and automatic sync when connectivity resumes.",
    "Administrative and user authentication flows facilitate secure profile management, anonymous access for reporting, and integration with Firebase if enabled."
  ],
  "validation_criteria": [
    "AI wildfire risk assessments must complete within 5 seconds with 85%+ accuracy validated against CAL FIRE historical data.",
    "Real-time map and fire data updates refresh every 5 minutes or immediately on critical changes.",
    "Community hazard reports and safety check-ins are processed with <500ms API response and support offline submission with automatic sync.",
    "Push notifications deliver within 500ms from trigger time and support priority filtering and background sync.",
    "The Crisis Mode interface activates correctly upon emergency triggers and hides non-essential UI elements.",
    "Accessibility audits confirm WCAG 2.1 AA compliance including voice narration, bilingual support, and screen reader compatibility.",
    "Test coverage meets 90%+ across unit, integration, end-to-end, and accessibility tests.",
    "System uptime is maintained at 99.9% with failover mechanisms for AI services and API endpoints.",
    "Offline functionality correctly caches data and synchronizes upon reconnection without data loss.",
    "Security audits confirm privacy-first data handling, anonymous reporting options, and secure family group communication."
  ],
  "code_summary": {
    "tech_stack": [
      "JavaScript",
      "React 18",
      "Node.js",
      "Express.js",
      "Vite",
      "TailwindCSS",
      "Azure Cosmos DB",
      "Firebase",
      "Leaflet Maps",
      "Playwright",
      "Vitest"
    ],
    "features": [
      {
        "name": "Community Hub - Hazard Reporting",
        "description": "Community coordination system for reporting fire hazards, emergencies, and dangerous conditions with real-time status updates",
        "files": [
          "src/components/community/CommunityHub.jsx",
          "src/components/community/CommunityReporting.jsx",
          "src/components/community/SafetyCheckin.jsx",
          "server/routes/community.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/community/report": {
              "post": {
                "summary": "Submit community hazard report",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "location": {
                            "type": "object"
                          },
                          "description": {
                            "type": "string"
                          },
                          "hazardType": {
                            "type": "string"
                          },
                          "severity": {
                            "type": "string"
                          },
                          "reporterName": {
                            "type": "string"
                          },
                          "reporterEmail": {
                            "type": "string"
                          },
                          "images": {
                            "type": "array"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/community/reports": {
              "get": {
                "summary": "Get community reports by location",
                "parameters": [
                  {
                    "name": "lat",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "lng",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "radius",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "limit",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  }
                ]
              }
            }
          }
        }
      },
      {
        "name": "Family Safety Hub",
        "description": "Family coordination system with group codes, check-ins, emergency status updates, and messaging for family members during emergencies",
        "files": [
          "src/components/family/FamilySafetyHub.jsx",
          "src/components/family/GroupSetup.jsx",
          "src/components/family/InviteMembers.jsx",
          "src/components/family/QuickJoinGroup.jsx",
          "src/services/family/FamilyContext.jsx",
          "server/routes/family-groups.js",
          "server/routes/family-groups-cosmos.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/family-groups/create": {
              "post": {
                "summary": "Create new family group",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "groupName": {
                            "type": "string"
                          },
                          "creatorId": {
                            "type": "string"
                          },
                          "creatorName": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/family-groups/join": {
              "post": {
                "summary": "Join family group by code",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "groupCode": {
                            "type": "string"
                          },
                          "userId": {
                            "type": "string"
                          },
                          "userName": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Crisis Mode Interface",
        "description": "Emergency-only interface activated during critical situations, providing simplified UI for emergency actions and critical report viewing",
        "files": [
          "src/components/community/CrisisMode.jsx",
          "src/utils/emergencyHelpers.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/emergency/activate": {
              "post": {
                "summary": "Activate crisis mode for area",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "location": {
                            "type": "object"
                          },
                          "emergencyLevel": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Fire Data API",
        "description": "Real-time wildfire detection and monitoring using NASA FIRMS data with AI-enhanced predictions and location-based fire alerts",
        "files": [
          "server/routes/fire-data.js",
          "src/services/api/fireDataService.js",
          "src/hooks/useFireData.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/fire-data/nearby": {
              "get": {
                "summary": "Get nearby fires by coordinates",
                "parameters": [
                  {
                    "name": "lat",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "lng",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "radius",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  }
                ]
              }
            },
            "/api/fire-data/state": {
              "get": {
                "summary": "Get fires by state",
                "parameters": [
                  {
                    "name": "state",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  }
                ]
              }
            }
          }
        }
      },
      {
        "name": "AI Risk Analysis",
        "description": "AI-powered wildfire risk assessment combining social vulnerability data, weather conditions, and real-time fire data for community impact predictions",
        "files": [
          "server/routes/ai-analysis.js",
          "server/routes/enhanced-ai-analysis.js",
          "src/services/api/communityImpactService.js",
          "src/pages/CommunityImpact.jsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/ai-analysis/risk": {
              "get": {
                "summary": "Get AI risk analysis for location",
                "parameters": [
                  {
                    "name": "lat",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "lng",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  }
                ]
              }
            },
            "/api/ai-analysis/community-impact": {
              "get": {
                "summary": "Get community impact assessment"
              }
            }
          }
        }
      },
      {
        "name": "Weather Integration",
        "description": "Weather data integration with fire weather conditions monitoring and alerts for enhanced wildfire risk assessment",
        "files": [
          "server/routes/weather.js",
          "src/services/api/weatherService.js",
          "src/hooks/useWeatherData.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/weather/current": {
              "get": {
                "summary": "Get current weather conditions",
                "parameters": [
                  {
                    "name": "lat",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "lng",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  }
                ]
              }
            },
            "/api/weather/forecast": {
              "get": {
                "summary": "Get weather forecast",
                "parameters": [
                  {
                    "name": "lat",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "lng",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  }
                ]
              }
            }
          }
        }
      },
      {
        "name": "Alert System",
        "description": "Emergency alert system with push notifications, email alerts, and location-based emergency notifications",
        "files": [
          "server/routes/alerts.js",
          "server/routes/notifications.js",
          "src/services/api/alertsService.js",
          "src/hooks/useAlerts.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/alerts/current": {
              "get": {
                "summary": "Get current alerts for location",
                "parameters": [
                  {
                    "name": "lat",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  },
                  {
                    "name": "lng",
                    "in": "query",
                    "schema": {
                      "type": "number"
                    }
                  }
                ]
              }
            },
            "/api/notifications/subscribe": {
              "post": {
                "summary": "Subscribe to push notifications",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "endpoint": {
                            "type": "string"
                          },
                          "keys": {
                            "type": "object"
                          },
                          "location": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Advanced Filtering System",
        "description": "Multi-criteria filtering system for community reports with saved presets, proximity filters, and smart recommendations",
        "files": [
          "src/components/community/AdvancedFilters.jsx",
          "src/utils/emergencyHelpers.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/filters/presets": {
              "get": {
                "summary": "Get saved filter presets"
              },
              "post": {
                "summary": "Save new filter preset",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "filters": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Authentication System",
        "description": "Privacy-first authentication with anonymous emergency reporting, local user management, and optional Firebase integration",
        "files": [
          "src/services/auth/AuthContext.jsx",
          "src/services/auth/firebase.js",
          "src/services/profile/ProfileContext.jsx"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/auth/anonymous": {
              "post": {
                "summary": "Create anonymous user for emergency reporting"
              }
            },
            "/api/auth/profile": {
              "get": {
                "summary": "Get user profile"
              },
              "put": {
                "summary": "Update user profile"
              }
            }
          }
        }
      },
      {
        "name": "Offline Functionality",
        "description": "Offline-first architecture with data caching, service worker integration, and emergency reporting capabilities without internet",
        "files": [
          "src/components/offline/OfflineIndicator.jsx",
          "src/hooks/useOfflineSimple.js",
          "src/services/storage/StorageManager.js",
          "src/services/storage/LocalStorageService.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/offline/sync": {
              "post": {
                "summary": "Sync offline data when connection restored"
              }
            },
            "/api/offline/cache": {
              "get": {
                "summary": "Get cached data status"
              }
            }
          }
        }
      }
    ]
  }
}
